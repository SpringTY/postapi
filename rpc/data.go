package rpc

import (
	"encoding/json"
	"fmt"
	view_model "postapi/model/view"
)

func getStatic() string {
	return `[
		{
		  "start": "0",
		  "groundTruth": [
			3,
			5,
			7,
			2,
			1,
			4,
			6
		  ],
		  "points": [
			[
			  563.3,
			  120.180031,
			  30.322666,
			  2.0,
			  1.1979919373241044,
			  70.0,
			  119.98333333333335,
			  115.41666666666663
			],
			[
			  474.15,
			  120.180031,
			  30.322666,
			  2.0,
			  1.1979919373241044,
			  70.0,
			  185.85000000000002,
			  92.13333333333333
			],
			[
			  527.6,
			  120.180031,
			  30.322666,
			  2.0,
			  1.1979919373241044,
			  70.0,
			  252.39999999999998,
			  212.13333333333333
			],
			[
			  496.4,
			  120.178986,
			  30.32284000000001,
			  2.0,
			  2.875180649577851,
			  168.0,
			  163.60000000000002,
			  92.13333333333333
			],
			[
			  488.66666666666674,
			  120.179331,
			  30.324025,
			  2.0,
			  3.90203088156994,
			  228.0,
			  171.33333333333326,
			  92.13333333333333
			],
			[
			  499.75,
			  120.180503,
			  30.323697,
			  2.0,
			  2.6526964326462315,
			  155.0,
			  160.25,
			  92.13333333333333
			],
			[
			  477.63333333333327,
			  120.180503,
			  30.323697,
			  2.0,
			  2.6526964326462315,
			  155.0,
			  182.36666666666673,
			  92.13333333333333
			]
		  ]
		},
		{
		  "start": "0",
		  "groundTruth": [
			3,
			5,
			2,
			4,
			6,
			1
		  ],
		  "points": [
			[
			  499.75,
			  120.180503,
			  30.323697,
			  2.0,
			  2.0194721229177763,
			  118.0,
			  160.25,
			  71.86666666666667
			],
			[
			  477.63333333333327,
			  120.180503,
			  30.323697,
			  2.0,
			  2.0194721229177763,
			  118.0,
			  182.36666666666673,
			  71.86666666666667
			],
			[
			  563.3,
			  120.180031,
			  30.322666,
			  2.0,
			  2.823838137978246,
			  165.0,
			  119.98333333333335,
			  95.14999999999998
			],
			[
			  474.15,
			  120.180031,
			  30.322666,
			  2.0,
			  2.823838137978246,
			  165.0,
			  185.85000000000002,
			  71.86666666666667
			],
			[
			  527.6,
			  120.180031,
			  30.322666,
			  2.0,
			  2.823838137978246,
			  165.0,
			  252.39999999999998,
			  191.86666666666667
			],
			[
			  496.4,
			  120.178986,
			  30.32284000000001,
			  2.0,
			  2.3104130219822014,
			  135.0,
			  163.60000000000002,
			  71.86666666666667
			]
		  ]
		},
		{
		  "start": "0",
		  "groundTruth": [
			1,
			3,
			5,
			2,
			4
		  ],
		  "points": [
			[
			  563.3,
			  120.180031,
			  30.322666,
			  2.0,
			  1.7456453943865524,
			  102.0,
			  119.98333333333335,
			  88.66666666666663
			],
			[
			  474.15,
			  120.180031,
			  30.322666,
			  2.0,
			  1.7456453943865524,
			  102.0,
			  185.85000000000002,
			  65.38333333333333
			],
			[
			  527.6,
			  120.180031,
			  30.322666,
			  2.0,
			  1.7456453943865524,
			  102.0,
			  252.39999999999998,
			  185.38333333333333
			],
			[
			  499.75,
			  120.180503,
			  30.323697,
			  2.0,
			  2.97786567277706,
			  174.0,
			  160.25,
			  65.38333333333333
			],
			[
			  477.63333333333327,
			  120.180503,
			  30.323697,
			  2.0,
			  2.97786567277706,
			  174.0,
			  182.36666666666673,
			  65.38333333333333
			]
		  ]
		},
		{
		  "start": "0",
		  "groundTruth": [
			2,
			4,
			1,
			3
		  ],
		  "points": [
			[
			  474.15,
			  120.180031,
			  30.322666,
			  2.0,
			  0.0,
			  0.0,
			  185.85000000000002,
			  63.06666666666672
			],
			[
			  527.6,
			  120.180031,
			  30.322666,
			  2.0,
			  0.0,
			  0.0,
			  252.39999999999998,
			  183.06666666666672
			],
			[
			  499.75,
			  120.180503,
			  30.323697,
			  2.0,
			  2.087928805050582,
			  122.0,
			  160.25,
			  63.06666666666672
			],
			[
			  477.63333333333327,
			  120.180503,
			  30.323697,
			  2.0,
			  2.087928805050582,
			  122.0,
			  182.36666666666673,
			  63.06666666666672
			]
		  ]
		},
		{
		  "start": "0",
		  "groundTruth": [
			2,
			1,
			3,
			4
		  ],
		  "points": [
			[
			  477.63333333333327,
			  120.180503,
			  30.323697,
			  2.0,
			  0.0,
			  0.0,
			  182.36666666666673,
			  59.450000000000045
			],
			[
			  474.15,
			  120.180031,
			  30.322666,
			  2.0,
			  2.087928805050582,
			  122.0,
			  185.85000000000002,
			  59.450000000000045
			],
			[
			  527.6,
			  120.180031,
			  30.322666,
			  2.0,
			  2.087928805050582,
			  122.0,
			  252.39999999999998,
			  179.45000000000005
			],
			[
			  597.7,
			  120.180031,
			  30.322666,
			  2.0,
			  2.087928805050582,
			  122.0,
			  182.29999999999995,
			  179.45000000000005
			]
		  ]
		}
	  ]`
}

func GetStaticDealData() ([]*view_model.Deal, error) {
	raw := getStatic()
	var deals []*view_model.Deal
	err := json.Unmarshal([]byte(raw), &deals)
	if err != nil {
		print(fmt.Sprintf(" get static data unmarshal error %s", err))
		return nil, err
	}
	for idx, deal := range deals {
		deal.Length = len(deal.Points)
		deal.Id = fmt.Sprintf("demo_static_%v", idx)
	}
	return deals, nil
}
